<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script src="https://unpkg.com/vue@next"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
    <script src="api.js"></script>
    <script src="script.js" defer></script>
    <title>Conference Management System</title>
</head>
<body>

<!-- Preloader -->
<div id="loader-wrapper">
    <div id="loader"></div>
    <div class="loader-section section-left"></div>
    <div class="loader-section section-right"></div>
</div>

<!-- Navigation Menu -->
<div id="menu" class="w3-bar w3-xlarge">
    <a class="w3-bar-item w3-button w3-ripple w3-left" onclick="openTab('.menu-tab', 'home-tab')">HOME</a>
<!--    <a v-if="authenticated" class="w3-bar-item w3-button w3-ripple" onclick="openTab('profile-tab')">Profile</a>-->
    <a v-if="authenticated" class="w3-bar-item w3-button w3-ripple w3-left" onclick="openTab('.menu-tab', 'dashboard-tab')">Dashboard</a>
    <a v-if="authenticated" class="w3-bar-item w3-button w3-ripple w3-round-large w3-left" @click.prevent="showAddConference" style="border: 1px solid var(--text-color)">Add Conference <span class="icon material-icons md-24">add_circle_outline</span></a>
    <a v-if="authenticated" class="w3-bar-item w3-button w3-ripple w3-right" @click.prevent="logout">Sign Out</a>
    <a v-if="authenticated" class="w3-bar-item w3-right w3-text-grey">&#8226;{{username}}&#8226;</a>
    <a v-if="!authenticated" class="w3-bar-item w3-button w3-ripple w3-right" @click.prevent="showLogin">Sign In</a>
</div>

<!-- Home Page Tab -->
<div id="home-tab" class="menu-tab">
    <!-- Presentation Card/Title -->
    <div id="" class="presentation w3-container w3-display-container">
        <div class="w3-auto">
            <h1 class="w3-jumbo w3-display-middle w3-center w3-wide">CONFERENCE MANAGEMENT SYSTEM</h1>
        </div>
    </div>

    <!-- Upcoming Conferences Heading -->
    <div class="w3-container">
        <h1 class="heading w3-panel w3-border w3-bottombar w3-round-xxlarge w3-center w3-wide">Upcoming Conferences</h1>
    </div>

    <!-- Conferences Section -->
    <div class="w3-container">
        <div v-for="conference in conferences">
            <!-- Conference Details Card -->
            <div class="w3-panel">
                <div class="w3-card w3-round-large w3-leftbar w3-display-container w3-hover-shadow">
                    <span class="conference-name w3-padding w3-wide w3-block w3-xlarge">{{conference.title}}</span>
                    <div class="w3-bar">
                        <div class="w3-bar-item">
                            <article class="conference-details-primary w3-large">{{conference.description}}</article>
                            <section class="conference-details-secondary w3-small">Location: <span>{{conference.location}}</span></section>
                            <section class="conference-details-secondary w3-small">Date: <span>{{conference.date}}</span></section>
                            <section class="conference-details-secondary w3-small">Fee: <span>${{conference.fee}}</span></section>
                            <section class="conference-details-secondary w3-small w3-display-bottomleft w3-margin">
                                Want to propose a paper?
                                <a href="#" v-on:click="showSubmissionModal(conference.id)">Click here!</a>
                            </section>
                        </div>
                        <button class="cms-button w3-button w3-large w3-container w3-bar-item w3-right w3-padding-64 w3-margin" v-on:click="showConfirmJoinModal(conference.id, conference.title)">
                            Get a ticket
                            <p class="conference-details-secondary w3-tiny w3-margin-0 w3-center">
                                Deadline: {{new Date(conference.deadline).toDateString()}}
                            </p>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Profile Page Tab -->
<div id="profile-tab" class="menu-tab">
    <header class="presentation w3-container">
        <h1 class="w3-jumbo">Profile</h1>
    </header>
</div>

<!-- Dashboard Page Tab -->
<div id="dashboard-tab" class="menu-tab">
    <header class="presentation w3-container">
        <h1 class="w3-jumbo">Dashboard</h1>
    </header>


    <!-- Dashboard Menu -->
    <div id="dashboard-menu" class="w3-sidebar w3-bar-block w3-large w3-cell">
        <button class="w3-bar-item w3-button w3-ripple w3-center w3-padding-32" onclick="openTab('.dashboard-content-tab', 'dashboard-conferences-tab')">My Conferences <span style="float: right">&#10095;</span></button>
        <button class="w3-bar-item w3-button w3-ripple w3-center w3-padding-32" onclick="openTab('.dashboard-content-tab', 'dashboard-papers-tab')">My Papers <span style="float: right">&#10095;</span> </button>
    </div>

    <!-- My Conferences Section -->
    <div id="dashboard-conferences-tab" class="dashboard-content-tab w3-container w3-cell">
        <h2 class="w3-container w3-xxlarge">My Conferences</h2>

        <!-- Listener -->
        <h3 class="w3-container w3-xlarge">Listener</h3>
        <div v-if="conferences.listener && conferences.listener.length === 0" class="w3-container w3-small w3-margin-left">You are not attending any conference</div>
        <div v-for="conference in conferences.listener">
            <!-- My Conference Details Card -->
            <div class="w3-panel w3-margin-left">
                <div class="w3-card w3-round-large w3-leftbar w3-display-container w3-hover-shadow">
                    <h3 class="conference-name w3-padding w3-wide">{{conference.title}}</h3>
                    <div class="w3-bar">
                        <div class="w3-bar-item">
                            <article class="conference-details-primary w3-large">{{conference.description}}</article>
                            <section class="conference-details-secondary w3-small">Location: <span>{{conference.location}}</span></section>
                            <section class="conference-details-secondary w3-small">Date: <span>{{conference.date}}</span></section>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Steering -->
        <h3 class="w3-container w3-xlarge">Steering</h3>
        <div v-if="conferences.steeringCommittee && conferences.steeringCommittee.length === 0" class="w3-container w3-small w3-margin-left">You are not steering any conference</div>
        <div v-for="conference in conferences.steeringCommittee">
            <!-- My Conference Details Card -->
            <div class="w3-panel w3-margin-left">
                <div class="w3-card w3-round-large w3-leftbar w3-display-container w3-hover-shadow">
                    <h3 class="conference-name w3-padding w3-wide">{{conference.title}}</h3>
                    <div class="w3-bar">
                        <div class="w3-bar-item">
                            <article class="conference-details-primary w3-large">{{conference.description}}</article>
                            <section class="conference-details-secondary w3-small">Location: <span>{{conference.location}}</span></section>
                            <section class="conference-details-secondary w3-small">Date: <span>{{conference.date}}</span></section>
                        </div>
                        <button class="cms-button w3-button w3-large w3-container w3-bar-item w3-right w3-padding w3-margin" v-on:click="showEditConferenceModal(conference)">
                            Edit
                        </button>
                        <button class="cms-button w3-button w3-large w3-container w3-bar-item w3-right w3-padding w3-margin" v-on:click="showViewPapersModal(conference)">
                            View Papers
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- My papers Section -->
    <div id="dashboard-papers-tab" class="dashboard-content-tab w3-container w3-cell">
        <h2 class="w3-container w3-xxlarge">My Papers</h2>

        <div v-for="conference in papers">
            <!-- My Papers On Conference Details Card -->
            <div class="w3-panel">
                <div class="w3-card w3-round-large w3-leftbar w3-display-container w3-hover-shadow">
                    <h3 class="conference-name w3-padding w3-wide">{{conference.title}}</h3>
                    <!-- Papers List -->
                    <div v-for="paper in conference.papers">
                        <div class="w3-bar">
                            <div class="w3-bar-item">
                                <article class="conference-details-primary w3-large">{{paper.title}}</article>
                            </div>
                            <button class="cms-button w3-button w3-large w3-container w3-bar-item w3-right w3-padding w3-margin" v-on:click="">
                                Edit
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


</div>

<!-- Login Modal -->
<div id="login-modal" class="w3-modal">
    <div class="w3-modal-content w3-animate-top w3-card-4">
        <header class="w3-container presentation">
            <span onclick="document.getElementById('login-modal').style.display='none'" class="cms-button w3-button w3-display-topright w3-round-large">&times;</span>
            <h1>Sign In</h1>
        </header>

        <form class="w3-container w3-margin-top" @submit.prevent="login">
            <label>
                <span>Username</span>
                <input type="text" class="w3-input w3-margin-bottom" placeholder="Enter Username" v-model="username" required>
            </label>

            <label>
                <span>Password</span>
                <input type="password" class="w3-input w3-margin-bottom" placeholder="Enter Password" v-model="password" required>
            </label>

            <button type="submit" class="w3-button w3-margin-bottom w3-bar w3-section w3-round-large">Sign In</button>
        </form>

        <footer class="w3-container">
            <p class="w3-tiny"> Don't have account? <a href="#" onclick="document.getElementById('login-modal').style.display='none'; document.getElementById('signup-modal').style.display='block'">Create a new one!</a></p>
        </footer>
    </div>
</div>

<!-- New Account Modal -->
<div id="signup-modal" class="w3-modal">
    <div class="w3-modal-content w3-animate-top w3-card-4">
        <header class="w3-container presentation">
            <span onclick="document.getElementById('signup-modal').style.display='none'" class="cms-button w3-button w3-display-topright w3-round-large">&times;</span>
            <h1>New Account</h1>
        </header>

        <form class="w3-container w3-margin-top" @submit.prevent="register">
            <label class="w3-padding-top">
                <span>First Name</span>
                <input type="text" class="w3-input w3-margin-bottom" placeholder="Enter First Name" required>
            </label>

            <label>
                <span>Last Name</span>
                <input type="text" class="w3-input w3-margin-bottom" placeholder="Enter Last Name" required>
            </label>

            <label>
                <span>Username</span>
                <input type="text" class="w3-input w3-margin-bottom" placeholder="Enter Username" v-model="username" required>
            </label>

            <label>
                <span>Email Address</span>
                <input type="email" class="w3-input w3-margin-bottom" placeholder="Enter Email" v-model="email" required>
            </label>

            <label>
                <span>Password</span>
                <input type="password" class="w3-input w3-margin-bottom" placeholder="Enter Password" v-model="password1" required>
            </label>

            <label>
                <span>Confirm Password</span>
                <input type="password" class="w3-input w3-margin-bottom" placeholder="Confirm Password" v-model="password2" required>
            </label>

            <button type="submit" class="w3-button w3-margin-bottom w3-bar w3-section w3-round-large">Register</button>
        </form>
    </div>
</div>

<!-- Submit Proposal Modal -->
<div id="submit-proposal-modal" class="w3-modal">
    <div class="w3-modal-content w3-animate-top w3-card-4">
        <header class="w3-container presentation">
            <span onclick="document.getElementById('submit-proposal-modal').style.display='none'" class="cms-button w3-button w3-display-topright w3-round-large">&times;</span>
            <h1>Submit Proposal</h1>
        </header>

        <form class="w3-container w3-margin-top">
            <label>
                <span>Title</span>
                <input type="text" class="w3-input w3-margin-bottom" placeholder="Enter Proposal Title" v-model="title" required>
            </label>

            <label>
                <span>Keywords</span>
                <span class="w3-block">
                    <div v-for='(tag, index) in keywords_list' :key='tag' class="tag w3-tag w3-round-xxlarge">
                        <span @click='removeTag(index, keywords_list)'>x</span>
                        {{ tag }}
                    </div>
                </span>

                <input type="text" class="w3-input w3-margin-bottom" placeholder="Enter Keywords" @keydown.enter='addTag($event, keywords_list)' @keydown.delete='removeLastTag($event, keywords_list)'>
            </label>

            <label>
                <span>Topics</span>
                <span class="w3-block">
                    <div v-for='(tag, index) in topics_list' :key='tag' class="tag w3-tag w3-round-xxlarge">
                        <span @click='removeTag(index, topics_list)'>x</span>
                        {{ tag }}
                    </div>
                </span>

                <input type="text" class="w3-input w3-margin-bottom" placeholder="Enter Topics" @keydown.enter='addTag($event, topics_list)' @keydown.delete='removeLastTag($event, topics_list)'>
            </label>

            <label>
                <span>Co-authors (if any)</span>
                <span class="w3-block">
                    <div v-for='(tag, index) in authors_list' :key='tag' class="tag w3-tag w3-round-xxlarge">
                        <span @click='removeTag(index, authors_list)'>x</span>
                        {{ tag }}
                    </div>
                </span>

                <input type="text" class="w3-input w3-margin-bottom" placeholder="Enter Keywords" @keydown.enter='addTag($event, authors_list)' @keydown.delete='removeLastTag($event, authors_list)'>
            </label>

            <label>
                <span>Abstract</span>
                <input type="file" class="w3-input w3-margin-bottom" id="upload-abstract" v-on:change="abstractUpload()" required>
            </label>

            <label>
                <span>Paper (PDF)</span>
                <input type="file" class="w3-input w3-margin-bottom" id="upload-paper" v-on:change="paperUpload()" required>
            </label>
        </form>

        <footer class="w3-container w3-footer w3-row">
            <button type="button" class="w3-button w3-bar w3-half" onclick="document.getElementById('submit-proposal-modal').style.display='none'">Cancel</button>
            <button type="button" class="w3-button w3-bar w3-half" v-on:click="submitProposal()">Submit</button>
        </footer>
    </div>
</div>

<!-- Confirm Conference Join Modal -->
<div id="join-conference-modal" class="w3-modal">
    <div class="w3-modal-content w3-animate-top w3-card-4">
        <header class="w3-container presentation">
            <span class="cms-button w3-button w3-display-topright w3-round-large" onclick="hideModal('join-conference-modal')">&times;</span>
            <h1>{{title}}</h1>
        </header>

        <p class="w3-container w3-auto w3-large">Are you sure you want to register to this conference?</p>

        <footer class="w3-container w3-footer w3-row">
            <button type="button" class="w3-button w3-bar w3-half" onclick="hideModal('join-conference-modal')">Cancel</button>
            <button type="button" class="w3-button w3-bar w3-half" v-on:click="joinConference()">Get ticket!</button>
        </footer>
    </div>
</div>

<!-- Add Conference Modal -->
<div id="add-conference-modal" class="w3-modal">
    <div class="w3-modal-content w3-animate-top w3-card-4">
        <header class="w3-container presentation">
            <span onclick="document.getElementById('add-conference-modal').style.display='none'" class="cms-button w3-button w3-display-topright">&times;</span>
            <h1>Create New Conference</h1>
        </header>

        <form class="w3-container w3-margin-top">
            <label class="w3-padding-top">
                <span>Conference Title</span>
                <input type="text" class="w3-input w3-margin-bottom" placeholder="Enter Conference Title" v-model="title" required>
            </label>

            <label class="w3-padding-top">
                <span>Conference Description</span>
                <textarea class="w3-input w3-margin-bottom" placeholder="Enter Conference Description" v-model="description" required></textarea>
            </label>

            <label class="w3-padding-top">
                <span>Date</span>
                <input type="datetime-local" class="w3-input w3-margin-bottom" v-model="date" required>
            </label>

            <label class="w3-padding-top">
                <span>Location</span>
                <input type="text" class="w3-input w3-margin-bottom" v-model="location" required>
            </label>

            <label class="w3-padding-top">
                <span>Fee</span>
                <input type="number" class="w3-input w3-margin-bottom" v-model="fee" required>
            </label>

            <label class="w3-padding-top">
                <span>Registration Deadline</span>
                <input type="datetime-local" class="w3-input w3-margin-bottom" v-model="deadline" required>
            </label>

            <footer class="w3-container w3-footer w3-row">
                <button type="button" class="w3-button w3-half" onclick="document.getElementById('add-conference-modal').style.display='none'">Cancel</button>
                <button type="button" class="w3-button w3-half" v-on:click="createConference">Create</button>
            </footer>
        </form>

    </div>
</div>

<!-- Edit Conference Modal -->
<div id="edit-conference-modal" class="w3-modal">
    <div class="w3-modal-content w3-animate-top w3-card-4">
        <header class="w3-container presentation">
            <span onclick="document.getElementById('edit-conference-modal').style.display='none'" class="cms-button w3-button w3-display-topright">&times;</span>
            <h1>Edit Conference</h1>
        </header>

        <form class="w3-container w3-margin-top">
            <label class="w3-padding-top">
                <span>Conference Title</span>
                <input type="text" class="w3-input w3-margin-bottom" placeholder="Enter Conference Title" v-model="title" required>
            </label>

            <label class="w3-padding-top">
                <span>Conference Description</span>
                <textarea class="w3-input w3-margin-bottom" placeholder="Enter Conference Description" v-model="description" required></textarea>
            </label>

            <label class="w3-padding-top">
                <span>Date</span>
                <input type="datetime-local" class="w3-input w3-margin-bottom" v-model="date" required>
            </label>

            <label class="w3-padding-top">
                <span>Location</span>
                <input type="text" class="w3-input w3-margin-bottom" v-model="location" required>
            </label>

            <label class="w3-padding-top">
                <span>Fee</span>
                <input type="number" class="w3-input w3-margin-bottom" v-model="fee" required>
            </label>

            <label class="w3-padding-top">
                <span>Registration Deadline</span>
                <input type="datetime-local" class="w3-input w3-margin-bottom" v-model="deadline" required>
            </label>

            <label>
                <span>Add steering committee member</span>
                <span class="w3-block">
                    <div v-for='(tag, index) in steering_committee_list' :key='tag' class="tag w3-tag w3-round-xxlarge">
                        <span @click='removeTag(index, steering_committee_list)'>x</span>
                        {{ tag }}
                    </div>
                </span>

                <input type="text" class="w3-input w3-margin-bottom" placeholder="Enter Email" @keydown.enter='addTag($event, steering_committee_list)' @keydown.delete='removeLastTag($event, steering_committee_list)'>
            </label>

            <footer class="w3-container w3-footer w3-row">
                <button type="button" class="w3-button w3-half" onclick="document.getElementById('edit-conference-modal').style.display='none'">Cancel</button>
                <button type="button" class="w3-button w3-half" v-on:click="editConference">Save</button>
            </footer>
        </form>

    </div>
</div>

<!-- View Papers In Conference Modal -->
<div id="view-papers-modal" class="w3-modal">
    <div class="w3-modal-content w3-animate-top w3-card-4">
        <header class="w3-container presentation">
            <span onclick="hideModal('view-papers-modal')" class="cms-button w3-button w3-display-topright w3-round-large">&times;</span>
            <h1>Papers Submitted</h1>
        </header>

        <!-- Paper Panel Oficial -->
        <div v-for="paper in papers">
            <div class="w3-panel">
                <!-- Paper Name -->
                <div class="w3-container w3-block w3-row w3-border w3-hover-grey w3-round" style="cursor: pointer" v-on:click="openAccordionTab(paper.id)">
                    <p class="w3-left w3-large w3-padding" style="width: 100%;">{{paper.title}}<span class="icon material-icons w3-right md-24">expand_more</span></p>
                </div>
                <!-- Dropdown -->
                <div :id="'view-papers-section' + paper.id" class="w3-row w3-hide">
                    <!-- TODO: Populate the href tags of the abstract and papers with its corresponding path in database-->
                    <button class="w3-button w3-third"><a href="#" download="#"><span class="icon material-icons md-18">save_alt</span> Download Abstract</a></button>
                    <button class="w3-button w3-third"><a href="#" download="#"><span class="icon material-icons md-18">save_alt</span> Download Paper</a></button>
                    <button class="w3-button w3-third"><span class="icon material-icons md-18">rate_review</span> Bid For Review</button>
                </div>
            </div>
        </div>
    </div>
</div>



</body>
</html>
